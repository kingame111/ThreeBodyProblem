plugins {
    id 'java'
    id 'application'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

java {
    // קובע קומפילציה והרצה על Java 21
    toolchain { languageVersion = JavaLanguageVersion.of(21) }
}

dependencies {
    // Jackson (JSON)
    implementation("com.fasterxml.jackson.core:jackson-databind:2.17.1")
    implementation("com.fasterxml.jackson.core:jackson-annotations:2.17.1")
    implementation("com.fasterxml.jackson.core:jackson-core:2.17.1")

    // OpenCSV (CSV)
    implementation("com.opencsv:opencsv:5.9")

    // SQLite JDBC (DB מקומי)
    implementation("org.xerial:sqlite-jdbc:3.46.0.0")

    // Hipparchus (מתמטיקה / ODE) — גרסה 3.1
    implementation("org.hipparchus:hipparchus-core:3.1")
    implementation("org.hipparchus:hipparchus-ode:3.1")

    // JavaFX (classifier לפי מערכת ההפעלה)
    def os = org.gradle.internal.os.OperatingSystem.current()
    def jfxPlatform = os.isWindows() ? "win" : (os.isLinux() ? "linux" : "mac")
    implementation("org.openjfx:javafx-controls:21.0.3:$jfxPlatform")
    implementation("org.openjfx:javafx-graphics:21.0.3:$jfxPlatform")
    implementation("org.openjfx:javafx-base:21.0.3:$jfxPlatform")

    // JUnit (בדיקות)
    testImplementation(platform("org.junit:junit-bom:5.10.0"))
    testImplementation("org.junit.jupiter:junit-jupiter")
}

application {
    // עדכן לשם המחלקה הראשית שלך (כולל ה-package)
    mainClass = 'org.example.Main'
    // עוזר להרצת JavaFX בפרויקט לא-מודולרי
    applicationDefaultJvmArgs = ['--add-modules=javafx.controls,javafx.graphics']
}

test {
    useJUnitPlatform()
}
