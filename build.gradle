plugins {
    id 'java'
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.1.0'
}

group = 'org.example'
version = '1.0-SNAPSHOT'

repositories {
    mavenCentral()
}

java {
    // קומפילציה והרצה על Java 21 (אם אין מקומי, Gradle יוריד toolchain פעם אחת)
    toolchain { languageVersion = JavaLanguageVersion.of(21) }
}

javafx {
    version = "21.0.3"
    modules = [ 'javafx.controls', 'javafx.graphics' ] // הוסף מודולים לפי הצורך
}

dependencies {
    // Jackson
    implementation "com.fasterxml.jackson.core:jackson-databind:2.17.1"
    implementation "com.fasterxml.jackson.core:jackson-annotations:2.17.1"
    implementation "com.fasterxml.jackson.core:jackson-core:2.17.1"

    // OpenCSV
    implementation "com.opencsv:opencsv:5.9"

    // SQLite JDBC
    implementation "org.xerial:sqlite-jdbc:3.46.0.0"

    // Hipparchus
    implementation "org.hipparchus:hipparchus-core:3.1"
    implementation "org.hipparchus:hipparchus-ode:3.1"

    // JUnit
    testImplementation platform("org.junit:junit-bom:5.10.0")
    testImplementation "org.junit.jupiter:junit-jupiter"
}

application {
    // מחלקת main (כולל ה-package)
    mainClass = 'org.example.Main'
    // UTF-8 להרצה (לא מוסיפים כאן --add-modules)
    applicationDefaultJvmArgs += ['-Dfile.encoding=UTF-8']
}

// UTF-8 בקומפילציה
tasks.withType(JavaCompile).configureEach {
    options.encoding = 'UTF-8'
}

// חיבור קלט קונסול להרצת gradlew run (כדי ש-Scanner יעבוד)
tasks.withType(JavaExec).configureEach {
    standardInput = System.in
}

test {
    useJUnitPlatform()
}
